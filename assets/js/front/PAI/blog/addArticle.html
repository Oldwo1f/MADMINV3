<section id="content">

	<div class="content-wrap">

		<div class="container clearfix">

			
			<!-- <flash-message duration="5000" show-close="true"></flash-message> -->

			<h1 style="padding-top:30px;">Ajouter un contenu dans le fil d'actualités</h1>
				
			<div class="clearfix"></div>
			
			<div>
				<wizard on-finish="finishedWizardAddContent()"> 
				<wz-step wz-title="Avant de publier">
			    	<h2>Avant de publier</h2>
			    	<p>Avant de soumettre un contenu, veuillez prendre connaissance des points ci-dessous</p>
				
				 	<uib-accordion close-others="oneAtATime">
					   	<div uib-accordion-group class="panel-default" is-open="status1.open">
					      <uib-accordion-heading>
					        <i class="icon-question-sign"></i> Quels sont les types de contenu que je peux publier ?
					      </uib-accordion-heading>
					      Ici, vous pouvez relayer des articles d'actualité, des articles sponsorisés, ou des liens vers d'autres articles et pages qui pourraient intéresser le club des PAI. Évidemment, vous pouvez aussi rédiger vos propres articles ou billets d'humeur. 
					    </div>
				 	
					   	<div uib-accordion-group class="panel-default" is-open="status2.open">
					      <uib-accordion-heading>
					        <i class="icon-question-sign"></i> M'est-il possible de mettre en ligne un publicité ?
					      </uib-accordion-heading>
					      Vous pouvez écrire un article sponsorisé gratuitement. <br>Sinon, si vous souhaitez apparaître dans les encarts publicitaires prévus à cet effet et vous allouer une plus large visibilité, contactez alix@nutrimarketing.fr.
					    </div>
				   
					   	<div uib-accordion-group class="panel-default" is-open="status3.open">
					      <uib-accordion-heading>
					        <i class=" icon-comments-alt"></i> Les articles sont-ils relus avant leur publication en ligne ?
					      </uib-accordion-heading>
					      Oui, ils sont relus dans l'unique but d'éviter les malveillances. En revanche, ils ne sont pas corrigés et leur contenu n'est en aucun cas modifié par le modérateur. 
					    </div>
				    
					   	<div uib-accordion-group class="panel-default" is-open="status4.open">
					      <uib-accordion-heading>
					        <i class="icon-lock3"></i> Ai-je le droit d'écrire un article traitant de ma propre entreprise ?
					      </uib-accordion-heading>
					      Oui, à la seule et unique condition de préciser, lors de la création de votre article, qu'il s'agit d'un article sponsorisé.
					    </div>
				    
					   	<div uib-accordion-group class="panel-default" is-open="status5.open">
					      <uib-accordion-heading>
					        <i class=" icon-comments-alt"></i> Écrire un article peut-il me rapporter des points Collabs ?
					      </uib-accordion-heading>
					      Oui, si votre article possède un intérêt pour l'innovation alimentaire <br> Non, si c'est un article sponsorisé qui parle de vous.
					    </div>
				    
					   	<div uib-accordion-group class="panel-default" is-open="status6.open">
					      <uib-accordion-heading>
					        <i class="icon-ok"></i> Suis-je en droit de copier/coller un article trouvé sur le Web ?
					      </uib-accordion-heading>
					      Non, car vous devez posséder les droits d'auteur afin de publier un article en ligne. <br>Néanmoins, vous êtes en droit de poster un lien vers cet article avec un nouveau titre de votre choix.
					    </div>
					</uib-accordion>


			        <input type="submit" class="btn btn-primary btn-lg pull-right" wz-next value="Commencer" />
			        <div class="clearfix"></div>
			    </wz-step>


				<wz-step wz-title="Type de contenus" canexit="exitValidationContenttype">
			        <h2>Choix du type de contenu</h2>

					<div class="allChoices">
						
						<div class="customradio" ng-class="{selected:formData.contentType == 'article'}" ng-click="formData.contentType = 'article'">
							<h3>Article d'actualité</h3>
							<!-- <i class="icon-lock3"></i> -->
							<p>Un article qui traite des actualités du secteur de l'agroalimentaire et de l'innovation.</p>
							<div class="customcheckbox">
								<i ng-if="formData.contentType != 'article'" class="fa fa-square-o"></i>
								<i ng-if="formData.contentType == 'article'" class="fa fa-check-square-o"></i>
							</div>
						</div>
						<div class="customradio" ng-class="{selected:formData.contentType == 'sponsored'}" ng-click="formData.contentType = 'sponsored'">
							<h3>Article sponsorisé</h3>
							<!-- <i class="icon-lock3"></i> -->
							<p>Un article qui parle de vous ou de votre entreprise. Vous pouvez mettre en ligne votre petite annonce ou votre article publicitaire.</p>
							<div class="customcheckbox">
								<i ng-if="formData.contentType != 'sponsored'" class="fa fa-square-o"></i>
								<i ng-if="formData.contentType == 'sponsored'" class="fa fa-check-square-o"></i>
							</div>
						</div>
						<div class="customradio" ng-class="{selected:formData.contentType == 'link'}" ng-click="formData.contentType = 'link'">
							<h3>Liens vers un article du web</h3>
							<!-- <i class="icon-lock3"></i> -->
							<p>Ici, vous partagez un lien vers un article du web.</p>
							<div class="customcheckbox">
								<i ng-if="formData.contentType != 'link'" class="fa fa-square-o"></i>
								<i ng-if="formData.contentType == 'link'" class="fa fa-check-square-o"></i>
							</div>
						</div>
						<div class="customradio2"  >
							<h3>Évènements / Documents / Ingrédients nouveaux</h3>
							<!-- <i class="icon-lock3"></i> -->
							<p>Rendez-vous dans la page appropriée pour ajouter de nouveaux contenus. 
								<br> Ils seront automatiquement ajoutés au fil d'actualités.</p>
							<!-- <div class="customcheckbox">
								<i ng-if="formData.contentType != 'link'" class="fa fa-square-o"></i>
								<i ng-if="formData.contentType == 'link'" class="fa fa-check-square-o"></i>
							</div> -->
						</div>
					</div>




			        
			        <input type="submit" class="btn btn-primary btn-lg pull-right" wz-next value="Contenus" />
			        <div class="clearfix"></div>
			    </wz-step>

				<wz-step wz-title="Contenus"  canexit="exitValidationContenus">
			        <h2>Contenus</h2>

					<div class="ADDCONTENT-link" ng-if="formData.contentType =='link'">
						
						<div class="form-group">
						  <label >Titre*:</label>
						  <input type="text" placeholder="Le titre de votre choix" ng-blur="update('title')" ng-model="formData.title" class="form-control">
						</div>

						<div class="form-group">
						  <label >Liens*:</label>
						  <input type="text" placeholder="http://" ng-model="formData.link" ng-blur="update('link')" class="form-control">
						</div>

						<div class="form-group">
						  <label >Résumé*:</label>
						  <textarea ui-tinymce="tinymceOption" ng-model="formData.content" ng-blur="update('content')"  type="text" placeholder="Entrez un petit résumé de l'article en bout de lien" class="form-control"> </textarea>
						</div>

						<div class="form-group">
						<label >Catégorie : <i class="icon-question-sign" tooltip-popup-delay='500' tooltip-placement="top-left" uib-tooltip-html="cattooltip"></i></label>
							<tags-input class="mycategoriesinput inputtag  mt" ng-model="formData.categories" on-tag-removed="removeCategory($tag)" on-tag-adding="addCategory($tag)"  ng-blur="unselectOnBlur()"  placeholder="Ajouter une catégorie" display-property="name" template="myCatTemplate" add-from-autocomplete-only="true">
				            	<auto-complete source="autocompleteCategories($query)" display-property="name" select-first-match="true" ></auto-complete>
				        	</tags-input>
			        	</div>

			        	<script type="text/ng-template" id="myCatTemplate">
			        		<div class=" cat-template" style="background:{{data.color}}">
						        <div> 
						          <span  style="color:{{data.textColor}}">{{$getDisplayText()}}</span>
						          <a class="remove-button"  style="color:{{data.textColor}}" ng-click="$removeTag()">&#10006;</a>
						        </div>
						     </div>
						</script>

						<!-- tag -->
						<div class="form-group">
							<label >Tag* : <i class="icon-question-sign" tooltip-popup-delay='500' tooltip-placement="top-left" uib-tooltip-html="tagtooltip"></i></label>
						    <tags-input class="mytaginput inputtag mb mt" ng-model="formData.tags" on-tag-removed="removeTag($tag)" on-tag-adding="addTag($tag)" ng-blur="unselectOnBlur()" >
				            	<auto-complete source="autocompleteTag($query)"  select-first-match="true" ></auto-complete>
				        	</tags-input>
						</div>

					</div>
					<!-- ng-if="formData.contentType =='article' || formData.contentType =='sponsored'" -->

					<div class="ADDCONTENT-article addImages"  ng-if="formData.contentType =='article' || formData.contentType =='sponsored'">
						
						<div class="form-group">
						  <label >Titre* :</label>
						  <input type="text" ng-blur="update('title')"  ng-model="formData.title" placeholder="le titre de votre choix" class="form-control">
						</div>

						<div class="form-group">
						  <label >Contenus* :</label>
						  <textarea ui-tinymce="tinymceOption" ng-blur="update('content')" ng-model="formData.content" type="text" placeholder="Entrez le contenu de l'article" class="form-control"> </textarea>
						</div>

						<div class="form-group">
						<label >Catégorie : <i class="icon-question-sign" tooltip-popup-delay='500' tooltip-placement="top-left" uib-tooltip-html="cattooltip"></i></label>
							<tags-input class="mycategoriesinput inputtag  mt" ng-model="formData.categories" on-tag-removed="removeCategory($tag)" on-tag-adding="addCategory($tag)" ng-blur="unselectOnBlur()"  placeholder="Ajouter une catégorie" display-property="name" template="myCatTemplate" add-from-autocomplete-only="true">
				            	<auto-complete source="autocompleteCategories($query)" display-property="name" select-first-match="true" ></auto-complete>
				        	</tags-input>
			        	</div>

			        	<script type="text/ng-template" id="myCatTemplate">
			        		<div class=" cat-template" style="background:{{data.color}}">
						        <div> 
						          <span  style="color:{{data.textColor}}">{{$getDisplayText()}}</span>
						          <a class="remove-button"  style="color:{{data.textColor}}" ng-click="$removeTag()">&#10006;</a>
						        </div>
						     </div>
						</script>

						<!-- tag -->
						<div class="form-group">
							<label >Tag* : <i class="icon-question-sign" tooltip-popup-delay='500' tooltip-placement="top-left" uib-tooltip-html="tagtooltip"></i></label>
						    <tags-input class="mytaginput inputtag mb mt" ng-model="formData.tags" on-tag-removed="removeTag($tag)" on-tag-adding="addTag($tag)" ng-blur="unselectOnBlur()" >
				            	<auto-complete source="autocompleteTag($query)"  select-first-match="true" ></auto-complete>
				        	</tags-input>
						</div>
						<div class="form_title formTitleSpecial">
							<label for="">Ajouter des images : </label>
						<!-- <input type="file"  class="addImageBtn" onchange="angular.element(this).scope().changeImageUrl(this)">
						<div class="addImageBtnFakeBtn" onclick="$(this).siblings('.addImageBtn').click();"> </div> -->
							<div class="btn " ngf-select="addImgCrop($files)" ng-model="file" ngf-pattern="'image/*'"
							    ngf-accept="'image/*'" ngf-max-size="20MB" ngf-min-height="100"> <i class="fa fa-plus"></i></div>
							<div ngf-drop="addImgCrop($files)" ngf-pattern="'image/*'"
							    ngf-accept="'image/*'" ngf-max-size="20MB" ngf-min-height="100" ngf-drag-over-class="'dragover'" ng-model="file" class="drop-zone" >Déposez vos images ici</div>
						</div>
						<!-- <div ng-file-drop  name="imgs" ng-multiple="false" ng-file-change="fileDrop($files)" class="drop-zone " 
					        drag-over-class="dragover" ng-multiple="false" allow-dir="false"
					        accept=".jpg,.png,.gif">Déposer vos images ici</div> -->

						

						<div class="imgrelativecontainer">
							
						<div image-crop 
					    		aspect-ratio="imgcrop.aspectRatio" 
					    		img-src="imgcrop.imgSrc" 
					    		img-load="'imgLoader.gif'" 
					    		display-height="imgcrop.displayHeight"
					    		display-width = "imgcrop.displayWidth"
					    		scaled-height="imgcrop.scaledHeight" 
					    		scaled-width="imgcrop.scaledWidth" 
					    		scaled-top="imgcrop.scaledTop" 
					    		scaled-left="imgcrop.scaledLeft" 
					    		container-width="imgcrop.containerWidth" 
					    		container-height="imgcrop.containerHeight" 
					    		style=" width: 100%; position:relative;" class="imageCropper" ng-class="{imageCropperH0: !imgcrop.imgSrc}">
							</div>
						<button ng-if="imgcrop.imgSrc" class="btn red" ng-click="removeImgCrop()">Annuler</button>
						<button ng-if="imgcrop.scaledWidth && !imgcrop.imgEditId" class="btn blue" ng-click="uploadImage()">Ajouter cette image</button>
						<button ng-if="imgcrop.scaledWidth && imgcrop.imgEditId" class="btn blue" ng-click="resizeOnly()">Redimensionner l'image</button>
						<div class="landscapeportrait"  ng-if="imgcrop.scaledWidth">
							<button class="btn blue" ng-click="changeOrientation()"><i class="fa fa-exchange"></i></button>
						</div>
						</div>
						<!-- <button ng-if="scaledWidth" class="btn blue" ng-click="uploadImage()">Redimentionner votre image</button> -->
						<p class="messageImage"  ng-if="imgcrop.imgSrc && !imgcrop.scaledWidth"><span>Vous devez redimensionner votre image avant de l'envoyer vers le serveur. <br> Conseil : Faites dessus le plus grand rectangle possible.</span></p>
						<div class="clearfix"></div>
						<div class="smallSeparator"></div>

						<div ng-repeat="uploadingImage in uploadingImages" class="uploadingDoc" ng-if="uploadingImage.status == 'progress'">
							<span>{{uploadingImage.file.name}}</span>
							<span>{{uploadingImage.text}}</span>
							<md-progress-linear md-mode="determinate" value="{{uploadingImage.progressPercentage}}"></md-progress-linear>
								
						</div> 

						<div class="smallSeparator"></div>
						<div class="imageList" ui-sortable="sortOption" ng-model="formData.images">
							<figure class="pull-left post__img" ng-repeat="img in formData.images">
								<img class="media-object" ng-src="image/adminThumbs/{{img.filename}}" alt="new">
								<!-- <div class="btnreresize" ng-click="resizeagain(img)"><i class="fa fa-crop"></i></div> -->
								<removeremove class="removeremove" action="removeImg" itemid="img.id"></removeremove>
							</figure>
							
							<!-- ng-if  number of image > 4 -->
							<!-- <div class="completor"></div> -->
						</div>
        	
		 	

					</div>


					<div class="blankseparator"></div>
					<div class="clearfix"></div>
			        <!-- <input type="submit" class="btn btn-primary btn-lg pull-left" wz-previous value="Type de contenus" /> -->
			        <input type="submit" class="btn btn-primary btn-lg pull-right" wz-next value="Validation" />
			        <div class="clearfix"></div>
			    </wz-step>
				
				




			    
			    
			    <wz-step wz-title="Validation" canenter="enterValidationFinish" canexit="exitValidationFinish">
			    	<h2>Validation</h2>
			        <p>Une fois validé, votre contenu sera placé en attente, car en cours de validation par le modérateur.</p>
			        <p>Cela peut prendre quelques minutes ou quelques jours selon la disponibilité des relecteurs-modérateurs.</p>
			        <p>Une fois validé, votre contenu vous rapportera {{nbPoints}} points collabs</p>
			        <p>Il vous sera possible d'obtenir des points collabs bonus en fonction de la pertinence de ce dernier.</p>
			        <div class="blankseparator"></div>
					<div class="clearfix"></div>


					<!-- <div class="alert alert-success pull-left" ng-if="successMessage">
					  <strong>Votre contenus à été posté!</strong> Vous aurez des nouvelles de sa validation dans vos email d'ici quelques jours.
					</div>
					<div class="alert alert-danger pull-left" ng-if="errorMessage">
					  <strong>Une erreur est survenu!</strong> Veuillez reessayer plus tard. Si le problème persiste contactez nous.
					</div> -->
			        <!-- <input type="submit" class="btn btn-primary btn-lg pull-left" wz-previous value="Contenus" /> -->
			        <input ng-if="!finishedWizzard" type="submit" class="btn btn-primary btn-lg pull-right" wz-next value="Valider" />
			        <!-- <a ng-if="finishedWizzard" ui-sref="blog" class="btn btn-primary btn-lg pull-right">Retour au blog</a> -->
			        <!-- <a ng-if="finishedWizzard" ui-sref="blog.add" class="btn btn-primary btn-lg pull-right">Soumettre un autre article</a> -->
			        <div class="clearfix"></div>
			    </wz-step>
				</wizard>
			</div>




		</div>
	</div>
</div>